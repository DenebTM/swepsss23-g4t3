# PlantHealth Frontend

Frontend for softawre engineering project, summer semester 2023.

## Stack

This project was bootstrapped with [Create React App](https://github.com/facebook/create-react-app) and uses Material Components [Material UI](https://mui.com/material-ui/getting-started/overview/).

[ESLint](https://eslint.org/docs/latest/) is used to enforce coding style and [Husky] automatically lints files on-stage with [Prettier](https://prettier.io/docs/en/index.html).

## Setup

Ensure you have [Node v18](https://nodejs.org/en/download/).

```
cd frontend                  -- Navigate to the frontend directory
yarn                         -- Install node_modules - may take a few minutes
yarn setup-husky             -- Set up Husky linting hook 
```

If you get an error from lint-staged stating that the local version of eslint can not be found, then it might be necessary to run `npm install -g eslint`.

To build the app, run `mvn spring-boot:run` in a terminal.

For production testing, navigate to [localhost:8080/](http://localhost:8080/).

For development testing, run `yarn start` in a new server (to reload the frontend on save) and navigate to [localhost:3000/](http://localhost:3000/).

## Available Scripts

In the project directory, you can run:

### `yarn start`

Runs the app in the development mode.\
Open [http://localhost:3000](http://localhost:3000) to view it in the browser.

The page will reload if you make edits.\
You will also see any lint errors in the console.

### `yarn mock`

Same as `yarn start`, except instead of making real calls to the backend it
uses a fake API running inside the app itself (implemented with [miragejs](https://miragejs.com/)). Useful for testing important functionality not yet implemented in the backend.

### `yarn check-types`

Check TypeScript types with `tsc`.

### `yarn test`

Run local tests for typing and user-defined tests with `vitest`.

### `yarn coverage`

Runs `vitest` and prints a test coverage report for the frontend generated by c8. See also [the vitest coverage guides](https://vitest.dev/guide/coverage.html).

### `yarn mvn-test`

Tests run during Maven build.

### `yarn build`

Builds the app for production to the `dist` folder using `vite build`.\
The app is ready to be deployed!

### `yarn lint-code`

Lint frontend code with `eslint`.

## Troubleshooting

- In case `yarn build` or `yarn start` shows errors like 'Can't resolve ...', try running `yarn cache clean` from within the `frontend` directory and deleting the `node_modules` folder. On the next run, all frontend dependencies will be reacquired and the build should succeed.

- If using VSCode to format files and Prettier uses the wrong format, you might need to [tell VS Code where the .prettierrc config file is](https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode#configuring-default-options). This happens as VS Code searches for `.prettierrc` in the root directory by default.

- If running `yarn` causes an error like `"EPERM: operation not permitted, unlink ...` then stop `yarn start` and `mvn spring-boot:run` processes in other terminals. If the error persists on Windows, then open the task manager and manually close all Node.js processes.